{"version":3,"names":["dFilled","dUnfilled","ExternalLinkIcon","_a","fill","rest","__rest","h","SvgTemplate","Object","assign","d","tLinkCss","TLinkStyle0","TLink","render","key","class","href","this","target","external","formatAuthor","author","forenames","forename","split","initials","map","name","charAt","join","surname","formatAuthors","authors","length","slice","formatPages","pageStart","pageEnd","undefined","toString","tSourceCss","TSourceStyle0","TSource","pages","articleTitle","bookTitle","city","date","doi","issue","journal","publisher","retrievedDate","title","url","volume","source","Host","AuthorAndYearInfo","JournalInfo","pagesText","PlaceAndPublisherInfo","RetrievedInfo","year","Fragment","VolumeAndIssue","dateString","monthIndex","month","day","Date","Intl","DateTimeFormat","navigator","language","format"],"sources":["src/icons/ExternalLinkIcon.tsx","src/components/t-link/t-link.css?tag=t-link&encapsulation=shadow","src/components/t-link/t-link.tsx","src/components/t-source/t-source-utils.ts","src/components/t-source/t-source.css?tag=t-source&encapsulation=shadow","src/components/t-source/t-source.tsx"],"sourcesContent":["import { h } from '@stencil/core';\r\nimport { SvgTemplate } from './SvgTemplate';\r\nimport { IconProps } from './IconProps';\r\n\r\nconst dFilled = 'm18.19 4.75-8.72 8.72a.75.75 0 1 0 1.06 1.06l8.72-8.72v5.69a.75.75 0 0 0 1.5 0V4a.747.747 0 0 0-.75-.75h-7.5a.75.75 0 0 0 0 1.5h5.69ZM8.408 15.591a2.25 2.25 0 0 0 3.182 0l4.305-4.305a.5.5 0 0 1 .854.353V19A1.75 1.75 0 0 1 15 20.75H5A1.75 1.75 0 0 1 3.25 19V9c0-.966.784-1.75 1.75-1.75h7.361a.5.5 0 0 1 .354.854l-4.306 4.305a2.25 2.25 0 0 0 0 3.182Z';\r\nconst dUnfilled = `\r\n    M 20.532 3.471\r\n    A .748 .748 0 0 1 20.75 4\r\n    v 7.5\r\n    a .75 .75 0 0 1 -1.5 0\r\n    V 5.81\r\n    l -8.72 8.72\r\n    a .75.75 0 1 1 -1.06 -1.06\r\n    l 8.72 -8.72\r\n    H 12.5\r\n    a .75 .75 0 0 1 0 -1.5\r\n    H 20\r\n    c .206 0 .393 .083 .529 .218\r\n    l .001 .002 .002 .001\r\n    Z\r\n    M 4.75 9\r\n    A .25 .25 0 0 1 5 8.75\r\n    h 7\r\n    a .75 .75 0 0 0 0 -1.5\r\n    H 5\r\n    A 1.75 1.75 0 0 0 3.25 9\r\n    v 10\r\n    c 0 .966 .784 1.75 1.75 1.75\r\n    h 10\r\n    A 1.75 1.75 0 0 0 16.75 19\r\n    v -7\r\n    a .75 .75 0 0 0 -1.5 0\r\n    v 7\r\n    a .25 .25 0 0 1 -.25 .25\r\n    H 5\r\n    a .25 .25 0 0 1 -.25 -.25\r\n    V 9\r\n    Z\r\n`; //'M20.532 3.471A.748.748 0 0 1 20.75 4v7.5a.75.75 0 0 1-1.5 0V5.81l-8.72 8.72a.75.75 0 1 1-1.06-1.06l8.72-8.72H12.5a.75.75 0 0 1 0-1.5H20c.206 0 .393.083.529.218l.001.002.002.001ZM4.75 9A.25.25 0 0 1 5 8.75h7a.75.75 0 0 0 0-1.5H5A1.75 1.75 0 0 0 3.25 9v10c0 .966.784 1.75 1.75 1.75h10A1.75 1.75 0 0 0 16.75 19v-7a.75.75 0 0 0-1.5 0v7a.25.25 0 0 1-.25.25H5a.25.25 0 0 1-.25-.25V9Z';\r\n\r\nexport const ExternalLinkIcon = ({fill, ...rest}: IconProps) => (\r\n  <SvgTemplate {...rest}>\r\n      <path\r\n        fill-rule=\"evenodd\"\r\n        clip-rule=\"evenodd\"\r\n        d={fill ? dFilled : dUnfilled}\r\n        fill=\"currentColor\"\r\n      />\r\n  </SvgTemplate>\r\n)\r\n",".link:link {\r\n  color: var(--t-link-colour);\r\n}\r\n\r\n.link:visited {\r\n  color: var(--t-link-visited-colour);\r\n}\r\n\r\n.link:hover {\r\n  text-decoration: none;\r\n}\r\n","import { Component, h, Prop } from '@stencil/core';\r\nimport { ExternalLinkIcon } from '../../icons/ExternalLinkIcon';\r\n\r\n@Component({\r\n  tag: 't-link',\r\n  styleUrl: 't-link.css',\r\n  shadow: true,\r\n})\r\nexport class TLink {\r\n\r\n  @Prop() href: string;\r\n  @Prop() target?: string;\r\n  @Prop() external?: boolean;\r\n\r\n  render() {\r\n    return <internal-style-provider>\r\n      <a class='link' href={this.href} target={this.target}>\r\n        <slot/>\r\n        {this.external && <ExternalLinkIcon/>}\r\n      </a>\r\n    </internal-style-provider>;\r\n  }\r\n}\r\n","import { Author } from '../../types/TSourceItem';\n\nexport const formatAuthor = (author: Author): string => {\n  if (typeof author === 'string') return author;\n  const forenames = author.forename.split(' ');\n  const initials = forenames.map(name => name.charAt(0) + '.');\n  return `${initials.join(' ')} ${author.surname}`;\n}\n\nexport const formatAuthors = (authors: Author[]): string => {\n  if (authors.length === 0) return '';\n  if (authors.length === 1) return formatAuthor(authors[0]);\n  if (authors.length === 2) return authors.map(formatAuthor).join(' & ');\n  return authors.slice(0, -1).map(formatAuthor).join(', ') + ' & ' + formatAuthor(authors[authors.length - 1]);\n}\n\nexport const formatPages = (pageStart?: number, pageEnd?: number): string => {\n  if (pageStart !== undefined && pageEnd !== undefined) return pageStart === pageEnd ? pageStart.toString() : `${pageStart}-${pageEnd}`;\n  if (pageStart) return pageStart.toString();\n  if (pageEnd) return pageEnd.toString();\n  return '';\n}\n",":host {\n  display: block;\n}\n\n.journal {\n  font-style: italic;\n}\n\n.articleTitle {\n  font-style: normal;\n}\n\n.bookTitle, .title {\n  font-style: italic;\n}\n","import { Component, Host, h, Prop, Fragment } from '@stencil/core';\nimport { TSourceItem } from '../../types/TSourceItem';\nimport { formatAuthors, formatPages } from './t-source-utils';\n\n@Component({\n  tag: 't-source',\n  styleUrl: 't-source.css',\n  shadow: true,\n})\nexport class TSource {\n\n  @Prop() source: TSourceItem;\n  @Prop() pagesText: (pages: string) => string = pages => `s. ${pages}`;\n\n  render() {\n\n    const {\n      articleTitle,\n      authors,\n      bookTitle,\n      city,\n      date,\n      doi,\n      issue,\n      journal,\n      pageEnd,\n      pageStart,\n      publisher,\n      retrievedDate,\n      title,\n      url,\n      volume,\n    } = this.source;\n\n    return (\n      <Host>\n        <AuthorAndYearInfo authors={authors} date={date}/>\n        {title && <cite class=\"title\">{title}{'. '}</cite>}\n        {bookTitle && <cite class=\"bookTitle\">{bookTitle}{'. '}</cite>}\n        {articleTitle && <cite class=\"articleTitle\">{articleTitle}{'. '}</cite>}\n        <JournalInfo\n          doi={doi}\n          issue={issue}\n          journal={journal}\n          pageEnd={pageEnd}\n          pageStart={pageStart}\n          pagesText={this.pagesText}\n          volume={volume}\n        />\n        <PlaceAndPublisherInfo city={city} publisher={publisher}/>\n        <RetrievedInfo url={url} retrievedDate={retrievedDate}/>\n      </Host>\n    );\n  }\n}\n\ntype AuthorAndYearInfoProps = Pick<TSourceItem, 'authors' | 'date'>;\n\nconst AuthorAndYearInfo = ({authors, date}: AuthorAndYearInfoProps) => {\n  if (authors || date?.year) {\n    return (\n      <>\n        <span class=\"authors-time\">\n          {authors && <span class=\"authors\">{formatAuthors(authors)}</span>}\n          {authors && date?.year && ' '}\n          {date?.year && <span class=\"time\">({date.year})</span>}\n          {'.'}\n        </span>\n        {' '}\n      </>\n    );\n  }\n  return null;\n}\n\ntype JournalInfoProps = Pick<TSourceItem, 'journal' | 'volume' | 'issue' | 'pageStart' | 'pageEnd' | 'doi'> & {\n  pagesText: (pages: string) => string;\n};\n\nconst JournalInfo = ({ journal, volume, issue, pageEnd, pageStart, doi, pagesText }: JournalInfoProps) => {\n  const pages = formatPages(pageStart, pageEnd);\n  if (!journal) return null;\n  return (\n    <>\n      <span>\n        <span class=\"journal\">{journal}</span>\n        {(volume || issue) && <>{', '}<VolumeAndIssue volume={volume} issue={issue} /></>}\n        {pages && <>{', '}<span class=\"pages\">{pagesText(pages)}</span></>}\n        {doi && <>{', '}\n          <t-link href={'http://doi.org/' + doi} target='_blank'>doi:{doi}</t-link>\n        </>}\n        {'.'}\n      </span>\n      {' '}\n    </>\n  );\n};\n\nconst VolumeAndIssue = ({ volume, issue }: { volume?: number; issue?: number }) => {\n  return (\n    <span>\n      {volume && <span class=\"volume\">{volume}</span>}\n      {issue && <span class=\"issue\">({issue})</span>}\n    </span>\n  );\n};\n\ntype PlaceAndPublisherInfoProps = Pick<TSourceItem, 'city' | 'publisher'>;\n\nconst PlaceAndPublisherInfo = ({city, publisher}: PlaceAndPublisherInfoProps) => {\n  if (city || publisher) {\n    return (\n      <>\n        <span>\n          {city && <span>{city}</span>}\n          {city && publisher && ': '}\n          {publisher && <span>{publisher}</span>}\n          {'.'}\n        </span>\n        {' '}\n      </>\n    );\n  }\n  return null;\n}\n\ntype RetrievedInfoProps = Pick<TSourceItem, 'url' | 'retrievedDate'>;\n\nconst RetrievedInfo = ({retrievedDate, url}: RetrievedInfoProps) => {\n  let dateString = '';\n  if (retrievedDate && retrievedDate.year) {\n    const { year } = retrievedDate;\n    const monthIndex = retrievedDate?.month ? retrievedDate.month - 1 : 0;\n    const day = retrievedDate?.day || 1;\n    const date = new Date(year, monthIndex, day);\n    dateString = Intl.DateTimeFormat(navigator.language).format(date);\n  }\n  if (dateString && url) {\n    return <span>Lokalisert <time>{dateString}</time> på <t-link href={url} target='_blank'>{url}</t-link>.</span>\n  }\n  if (dateString) {\n    return <span>Lokalisert <time>{dateString}</time>.</span>\n  }\n  if (url) {\n    return <span>Lokalisert på <t-link href={url} target='_blank'>{url}</t-link>.</span>\n  }\n  return null;\n};\n"],"mappings":"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"}