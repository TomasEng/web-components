{"file":"internal-style-provider.entry.esm.js","mappings":";;;AAAA,MAAM,wBAAwB,GAAG,6KAA6K;;MCoBjM,qBAAqB;;;gCAEG,CAAC;;IAIpC,MAAM;QACJ,MAAM,GAAG,GAAG,IAAI,CAAC,aAAa,EAAE,CAAC;QACjC,MAAM,UAAU,GAAG,IAAI,CAAC,UAAU,EAAE,CAAC;QACrC,MAAM,EAAE,CAAC,EAAE,GAAG,UAAU,CAAC,QAAQ,EAAE,CAAC;QACpC,IAAI,CAAC,cAAc,CAAC,qBAAqB,EAAE,GAAG,CAAC,OAAO,EAAE,GAAG,KAAK,CAAC,CAAC;QAClE,IAAI,CAAC,cAAc,CAAC,2BAA2B,EAAE,UAAU,CAAC,CAAC,CAAC,CAAC,CAAC;QAChE,IAAI,CAAC,cAAc,CAAC,iBAAiB,EAAE,iGAAiG,CAAC,CAAC;QAC1I,IAAI,CAAC,cAAc,CAAC,wBAAwB,EAAE,IAAI,CAAC,kBAAkB,EAAE,CAAC,YAAY,EAAE,CAAC,CAAC;QACxF,IAAI,CAAC,cAAc,CAAC,sBAAsB,EAAE,IAAI,CAAC,kBAAkB,EAAE,CAAC,YAAY,EAAE,CAAC,CAAC;QACtF,IAAI,CAAC,cAAc,CAAC,qBAAqB,EAAE,IAAI,CAAC,cAAc,EAAE,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC;QAC7E,OAAO,8DAAO,CAAC;KAChB;IAEO,aAAa;QACnB,OAAO,CAAC,KAAK,CAAC,OAAO,GAAG,IAAI,CAAC,gBAAgB,GAAG,GAAG,IAAI,GAAG,CAAC;KAC5D;IAEO,UAAU;QAChB,MAAM,EAAE,UAAU,EAAE,GAAG,KAAK,CAAC;QAC7B,MAAM,GAAG,GAAG,IAAI,CAAC,aAAa,EAAE,CAAC;QACjC,MAAM,SAAS,GAAU,EAAE,GAAG,EAAE,MAAM,EAAE,UAAU,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC;QAC7D,OAAO,IAAIA,cAAS,CAAC,SAAS,CAAC,CAAC,oBAAoB,CAAC,IAAI,CAAC,mBAAmB,EAAE,EAAE,OAAO,CAAC,CAAC;KAC3F;IAEO,mBAAmB;QACzB,OAAO,KAAK,CAAC,QAAQ,GAAG,+BAA+B,GAAG,gCAAgC,CAAC;KAC5F;IAEO,kBAAkB;QACxB,OAAO,IAAI,CAAC,UAAU,EAAE,CAAC,IAAI,EAAE,CAAC,oBAAoB,CAAC,IAAI,CAAC,2BAA2B,EAAE,EAAE,OAAO,CAAC,CAAC;KACnG;IAEO,2BAA2B;QACjC,OAAO,KAAK,CAAC,QAAQ;cACjB,+BAA+B,CAAC,8BAA8B,EAAE,qCAAqC,CAAC;cACtG,+BAA+B,CAAC,+BAA+B,EAAE,qCAAqC,CAAC,CAAC;KAC7G;IAEO,cAAc;QACpB,OAAO,KAAK,CAAC,QAAQ,GAAG,yBAAyB,GAAG,0BAA0B,CAAC;KAChF;IAEO,cAAc,CAAC,GAAoB,EAAE,KAAa;QACxD,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,WAAW,CAAC,GAAG,EAAE,KAAK,CAAC,CAAC;KAC5C;;;;;;;","names":["Chromator"],"sources":["src/components/internal-style-provider/internal-style-provider.css?tag=internal-style-provider&encapsulation=shadow","src/components/internal-style-provider/internal-style-provider.tsx"],"sourcesContent":[":host {\n  --t-base-colour: oklch(var(--t-base-colour-lightness) var(--t-base-colour-chroma) var(--t-base-colour-hue));\n  --t-selection-background-colour: var(--t-base-fill-colour);\n}\n\n","import { Component, h, Prop, Element } from '@stencil/core';\nimport { Chromator, Hsl, Oklch } from 'chromator';\nimport {\n  BASE_COLOUR_LUMINANCE_DARK_MODE,\n  BASE_COLOUR_LUMINANCE_LIGHT_MODE,\n  DARK_MODE_BACKGROUND_LUMINANCE,\n  DEFAULT_BORDER_TO_BACKGROUND_CONTRAST,\n  GRADIENT_FACTOR_DARK_MODE,\n  GRADIENT_FACTOR_LIGHT_MODE,\n  LIGHT_MODE_BACKGROUND_LUMINANCE,\n} from '../../constants';\nimport { asPercents } from '../../utils/utils';\nimport state from '../../store';\nimport { getDecreasedLuminanceByContrast, getIncreasedLuminanceByContrast } from '../../utils/colourUtils';\n\n@Component({\n  tag: 'internal-style-provider',\n  styleUrl: 'internal-style-provider.css',\n  shadow: true,\n})\nexport class InternalStyleProvider {\n\n  @Prop() hueOffsetInTurns: number = 0;\n\n  @Element() element: HTMLElement;\n\n  render() {\n    const hue = this.hueWithOffset();\n    const baseColour = this.baseColour();\n    const { l } = baseColour.getOklch();\n    this.setCssVariable('--t-base-colour-hue', hue.toFixed() + 'deg');\n    this.setCssVariable('--t-base-colour-lightness', asPercents(l));\n    this.setCssVariable('--t-base-colour', 'oklch(var(--t-base-colour-lightness) var(--t-base-colour-chroma, 0.4) var(--t-base-colour-hue))');\n    this.setCssVariable('--t-base-border-colour', this.baseContrastColour().getOklchCode());\n    this.setCssVariable('--t-base-fill-colour', this.baseContrastColour().getOklchCode());\n    this.setCssVariable('--t-gradient-factor', this.gradientFactor().toFixed(2));\n    return <slot/>;\n  }\n\n  private hueWithOffset(): number {\n    return (state.baseHue + this.hueOffsetInTurns * 360) % 360;\n  }\n\n  private baseColour(): Chromator {\n    const { baseChroma } = state;\n    const hue = this.hueWithOffset();\n    const baseOklch: Oklch = { hue, chroma: baseChroma, l: 0.5 };\n    return new Chromator(baseOklch).setRelativeLuminance(this.baseColourLuminance(), 'oklch');\n  }\n\n  private baseColourLuminance(): number {\n    return state.darkMode ? BASE_COLOUR_LUMINANCE_DARK_MODE : BASE_COLOUR_LUMINANCE_LIGHT_MODE;\n  }\n\n  private baseContrastColour(): Chromator {\n    return this.baseColour().copy().setRelativeLuminance(this.baseContrastColourLuminance(), 'oklch');\n  }\n\n  private baseContrastColourLuminance(): number {\n    return state.darkMode\n      ? getIncreasedLuminanceByContrast(DARK_MODE_BACKGROUND_LUMINANCE, DEFAULT_BORDER_TO_BACKGROUND_CONTRAST)\n      : getDecreasedLuminanceByContrast(LIGHT_MODE_BACKGROUND_LUMINANCE, DEFAULT_BORDER_TO_BACKGROUND_CONTRAST);\n  }\n\n  private gradientFactor(): number {\n    return state.darkMode ? GRADIENT_FACTOR_DARK_MODE : GRADIENT_FACTOR_LIGHT_MODE;\n  }\n\n  private setCssVariable(key: `--t-${string}`, value: string) {\n    this.element.style.setProperty(key, value);\n  }\n}\n"],"version":3}