{"file":"internal-style-provider.entry.esm.js","mappings":";;;;;;AAAA,MAAM,wBAAwB,GAAG,8SAA8S;;MCqBlU,qBAAqB;;;gCAEG,CAAC;;IAIpC,MAAM;QACJ,MAAM,GAAG,GAAG,IAAI,CAAC,aAAa,EAAE,CAAC;QACjC,MAAM,UAAU,GAAG,IAAI,CAAC,UAAU,EAAE,CAAC;QACrC,MAAM,EAAE,CAAC,EAAE,GAAG,UAAU,CAAC,QAAQ,EAAE,CAAC;QACpC,IAAI,CAAC,cAAc,CAAC,qBAAqB,EAAE,GAAG,CAAC,OAAO,EAAE,GAAG,KAAK,CAAC,CAAC;QAClE,IAAI,CAAC,cAAc,CAAC,2BAA2B,EAAE,UAAU,CAAC,CAAC,CAAC,CAAC,CAAC;QAChE,IAAI,CAAC,cAAc,CAAC,iBAAiB,EAAE,iGAAiG,CAAC,CAAC;QAC1I,IAAI,CAAC,cAAc,CAAC,wBAAwB,EAAE,IAAI,CAAC,kBAAkB,EAAE,CAAC,YAAY,EAAE,CAAC,CAAC;QACxF,IAAI,CAAC,cAAc,CAAC,0BAA0B,EAAE,IAAI,CAAC,kBAAkB,EAAE,CAAC,YAAY,EAAE,CAAC,CAAC;QAC1F,IAAI,CAAC,cAAc,CAAC,sBAAsB,EAAE,IAAI,CAAC,kBAAkB,EAAE,CAAC,YAAY,EAAE,CAAC,CAAC;QACtF,IAAI,CAAC,cAAc,CAAC,qBAAqB,EAAE,IAAI,CAAC,cAAc,EAAE,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC;QAC7E,IAAI,CAAC,cAAc,CAAC,8BAA8B,EAAE,IAAI,CAAC,qBAAqB,EAAE,CAAC,YAAY,EAAE,CAAC,CAAC;QACjG,OAAO,8DAAO,CAAC;KAChB;IAEO,aAAa;QACnB,OAAO,CAAC,KAAK,CAAC,OAAO,GAAG,IAAI,CAAC,gBAAgB,GAAG,GAAG,IAAI,GAAG,CAAC;KAC5D;IAEO,UAAU;QAChB,MAAM,EAAE,UAAU,EAAE,GAAG,KAAK,CAAC;QAC7B,MAAM,GAAG,GAAG,IAAI,CAAC,aAAa,EAAE,CAAC;QACjC,MAAM,SAAS,GAAU,EAAE,GAAG,EAAE,MAAM,EAAE,UAAU,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC;QAC7D,OAAO,IAAIA,cAAS,CAAC,SAAS,CAAC,CAAC,oBAAoB,CAAC,IAAI,CAAC,mBAAmB,EAAE,EAAE,OAAO,CAAC,CAAC;KAC3F;IAEO,mBAAmB;QACzB,OAAO,IAAI,CAAC,UAAU,EAAE,GAAG,+BAA+B,GAAG,gCAAgC,CAAC;KAC/F;IAEO,UAAU;QAChB,OAAO,KAAK,CAAC,IAAI,KAAK,MAAM,CAAC;KAC9B;IAEO,kBAAkB;QACxB,OAAO,IAAI,CAAC,UAAU,EAAE,CAAC,IAAI,EAAE,CAAC,oBAAoB,CAAC,IAAI,CAAC,2BAA2B,EAAE,EAAE,OAAO,CAAC,CAAC;KACnG;IAEO,2BAA2B;QACjC,OAAO,IAAI,CAAC,UAAU,EAAE;cACpB,+BAA+B,CAAC,8BAA8B,EAAE,aAAa,CAAC;cAC9E,+BAA+B,CAAC,+BAA+B,EAAE,aAAa,CAAC,CAAC;KACrF;IAEO,qBAAqB;QAC3B,OAAO,IAAI,CAAC,UAAU,EAAE,CAAC,IAAI,EAAE,CAAC,oBAAoB,CAAC,IAAI,CAAC,8BAA8B,EAAE,EAAE,OAAO,CAAC,CAAC;KACtG;IAEO,8BAA8B;QACpC,OAAO,IAAI,CAAC,UAAU,EAAE;cACpB,+BAA+B,CAAC,8BAA8B,EAAE,YAAY,CAAC;cAC7E,+BAA+B,CAAC,+BAA+B,EAAE,YAAY,CAAC,CAAC;KACpF;IAEO,cAAc;QACpB,OAAO,IAAI,CAAC,UAAU,EAAE,GAAG,yBAAyB,GAAG,0BAA0B,CAAC;KACnF;IAEO,cAAc,CAAC,GAAoB,EAAE,KAAa;QACxD,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,WAAW,CAAC,GAAG,EAAE,KAAK,CAAC,CAAC;KAC5C;;;;;;;","names":["Chromator"],"sources":["src/components/internal-style-provider/internal-style-provider.css?tag=internal-style-provider&encapsulation=shadow","src/components/internal-style-provider/internal-style-provider.tsx"],"sourcesContent":[":host {\r\n  --t-base-colour: oklch(var(--t-base-colour-lightness) var(--t-base-colour-chroma) var(--t-base-colour-hue));\r\n  --t-selection-background-colour: var(--t-base-fill-colour);\r\n  --t-link-colour: var(--t-base-contrast-colour);\r\n  --t-link-visited-colour: oklch(from var(--t-base-contrast-colour) l c calc(h + 30));\r\n}\r\n\r\n","import { Component, h, Prop, Element } from '@stencil/core';\r\nimport { Chromator, Oklch } from 'chromator';\r\nimport {\r\n  BASE_COLOUR_LUMINANCE_DARK_MODE,\r\n  BASE_COLOUR_LUMINANCE_LIGHT_MODE,\r\n  DARK_MODE_BACKGROUND_LUMINANCE,\r\n  HIGH_CONTRAST,\r\n  GRADIENT_FACTOR_DARK_MODE,\r\n  GRADIENT_FACTOR_LIGHT_MODE,\r\n  LIGHT_MODE_BACKGROUND_LUMINANCE,\r\n  LOW_CONTRAST,\r\n} from '../../constants';\r\nimport { asPercents } from '../../utils/utils';\r\nimport state from '../../store';\r\nimport { getDecreasedLuminanceByContrast, getIncreasedLuminanceByContrast } from '../../utils/colourUtils';\r\n\r\n@Component({\r\n  tag: 'internal-style-provider',\r\n  styleUrl: 'internal-style-provider.css',\r\n  shadow: true,\r\n})\r\nexport class InternalStyleProvider {\r\n\r\n  @Prop() hueOffsetInTurns: number = 0;\r\n\r\n  @Element() element: HTMLElement;\r\n\r\n  render() {\r\n    const hue = this.hueWithOffset();\r\n    const baseColour = this.baseColour();\r\n    const { l } = baseColour.getOklch();\r\n    this.setCssVariable('--t-base-colour-hue', hue.toFixed() + 'deg');\r\n    this.setCssVariable('--t-base-colour-lightness', asPercents(l));\r\n    this.setCssVariable('--t-base-colour', 'oklch(var(--t-base-colour-lightness) var(--t-base-colour-chroma, 0.4) var(--t-base-colour-hue))');\r\n    this.setCssVariable('--t-base-border-colour', this.baseContrastColour().getOklchCode());\r\n    this.setCssVariable('--t-base-contrast-colour', this.baseContrastColour().getOklchCode());\r\n    this.setCssVariable('--t-base-fill-colour', this.baseContrastColour().getOklchCode());\r\n    this.setCssVariable('--t-gradient-factor', this.gradientFactor().toFixed(2));\r\n    this.setCssVariable('--t-base-low-contrast-colour', this.baseLowContrastColour().getOklchCode());\r\n    return <slot/>;\r\n  }\r\n\r\n  private hueWithOffset(): number {\r\n    return (state.baseHue + this.hueOffsetInTurns * 360) % 360;\r\n  }\r\n\r\n  private baseColour(): Chromator {\r\n    const { baseChroma } = state;\r\n    const hue = this.hueWithOffset();\r\n    const baseOklch: Oklch = { hue, chroma: baseChroma, l: 0.5 };\r\n    return new Chromator(baseOklch).setRelativeLuminance(this.baseColourLuminance(), 'oklch');\r\n  }\r\n\r\n  private baseColourLuminance(): number {\r\n    return this.isDarkMode() ? BASE_COLOUR_LUMINANCE_DARK_MODE : BASE_COLOUR_LUMINANCE_LIGHT_MODE;\r\n  }\r\n\r\n  private isDarkMode(): boolean {\r\n    return state.mode === 'dark';\r\n  }\r\n\r\n  private baseContrastColour(): Chromator {\r\n    return this.baseColour().copy().setRelativeLuminance(this.baseContrastColourLuminance(), 'oklch');\r\n  }\r\n\r\n  private baseContrastColourLuminance(): number {\r\n    return this.isDarkMode()\r\n      ? getIncreasedLuminanceByContrast(DARK_MODE_BACKGROUND_LUMINANCE, HIGH_CONTRAST)\r\n      : getDecreasedLuminanceByContrast(LIGHT_MODE_BACKGROUND_LUMINANCE, HIGH_CONTRAST);\r\n  }\r\n\r\n  private baseLowContrastColour(): Chromator {\r\n    return this.baseColour().copy().setRelativeLuminance(this.baseLowContrastColourLuminance(), 'oklch');\r\n  }\r\n\r\n  private baseLowContrastColourLuminance(): number {\r\n    return this.isDarkMode()\r\n      ? getIncreasedLuminanceByContrast(DARK_MODE_BACKGROUND_LUMINANCE, LOW_CONTRAST)\r\n      : getDecreasedLuminanceByContrast(LIGHT_MODE_BACKGROUND_LUMINANCE, LOW_CONTRAST);\r\n  }\r\n\r\n  private gradientFactor(): number {\r\n    return this.isDarkMode() ? GRADIENT_FACTOR_DARK_MODE : GRADIENT_FACTOR_LIGHT_MODE;\r\n  }\r\n\r\n  private setCssVariable(key: `--t-${string}`, value: string) {\r\n    this.element.style.setProperty(key, value);\r\n  }\r\n}\r\n"],"version":3}