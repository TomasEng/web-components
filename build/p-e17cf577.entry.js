import{r as t,h as e,g as i,c as s,F as a}from"./p-223dec8c.js";import{S as n}from"./p-ab9dbb64.js";const r=":host{display:block}ul{list-style-type:none;padding-left:0;margin:0}";const l=r;const o=class{constructor(e){t(this,e)}async getAllItems(){await customElements.whenDefined("t-tree-item");return this.element.querySelectorAll("t-tree-item")}async getAllVisibleItems(){const t=await this.getAllItems();return(await Promise.all(Array.from(t).map((async t=>({include:await t.isVisible(),item:t}))))).filter((({include:t})=>t)).map((({item:t})=>t))}async resetTabindex(){const t=await this.getFocusableItems();await Promise.all(t.map((async t=>{await t.setFocusable(false)})))}async getFocusableItems(){const t=await this.getAllItems();const e=[];await Promise.all(Array.from(t).map((async t=>{if(await t.isFocusable()){e.push(t)}})));return e}componentDidLoad(){this.getAllVisibleItems().then((async t=>{if(t.length>0){await this.resetTabindex();await t[0].setFocusable(true)}}))}render(){return e("ul",{key:"b7dc096e3966937d961de35bcc4eac3664490636",role:"tree"},e("slot",{key:"ff6845d0ee2c00ee4c654455a8e9bb12e2c0fde7"}))}get element(){return i(this)}};o.style=l;var c=undefined&&undefined.__rest||function(t,e){var i={};for(var s in t)if(Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0)i[s]=t[s];if(t!=null&&typeof Object.getOwnPropertySymbols==="function")for(var a=0,s=Object.getOwnPropertySymbols(t);a<s.length;a++){if(e.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(t,s[a]))i[s[a]]=t[s[a]]}return i};const h="M9.713 18.193a.75.75 0 0 1-.463-.693v-11a.75.75 0 0 1 1.28-.53l5.5 5.5a.75.75 0 0 1 0 1.06l-5.5 5.5a.75.75 0 0 1-.817.163Z";const u="M9.713 18.193a.75.75 0 0 1-.463-.693v-11a.75.75 0 0 1 1.28-.53l5.5 5.5a.75.75 0 0 1 0 1.06l-5.5 5.5a.75.75 0 0 1-.817.163Zm1.037-2.504L14.44 12l-3.69-3.69v7.38Z";const w=t=>{var{fill:i}=t,s=c(t,["fill"]);return e(n,Object.assign({},s),e("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:i?h:u,fill:"currentColor"}))};const m="t-link::part(link), t-button::part(button) {\n  display: flex;\n  align-items: center;\n  gap: var(--t-spacing-inline);\n}\n\nli {\n  &.expanded {\n    svg {\n      rotate: 90deg;\n    }\n\n    .collapsible {\n      grid-template-rows: 1fr;\n    }\n  }\n\n  &.collapsed {\n    svg {\n      rotate: 0deg;\n    }\n\n    .collapsible {\n      grid-template-rows: 0fr;\n\n      ul {\n        visibility: hidden;\n      }\n    }\n  }\n\n  .collapsible {\n    overflow: hidden;\n    display: grid;\n    grid-template-rows: 1fr; /* To make height transition work */\n    transition: grid-template-rows var(--t-transition-duration-medium);\n\n    ul {\n      min-height: 0;\n      transition: visibility 1s;\n    }\n  }\n\n  svg {\n    transition: rotate var(--t-transition-duration-medium);\n  }\n}\n\nul {\n  list-style-type: none;\n  padding-left: var(--t-spacing-large);\n  margin: 0;\n}\n";const d=m;const f=class{constructor(e){t(this,e);this.labelClick=s(this,"labelClick",7);this.label=undefined;this.href=null;this.expanded=true;this.hasChildren=false}async isExpanded(){await customElements.whenDefined("t-tree-item");return this.expanded}async isVisible(){const t=await this.isTopLevel();if(t){return true}else{const t=this.element.parentElement;const e=await t.isVisible();if(!e)return false;return await t.isExpanded()}}async isFocusable(){await customElements.whenDefined("t-link");return this.linkOrButton.focusable}async isTopLevel(){await customElements.whenDefined("t-tree-item");return this.element.parentElement.tagName==="T-TREE"}async focusOnLink(){await Promise.all([customElements.whenDefined("t-link"),customElements.whenDefined("t-tree-item")]);await this.linkOrButton.focusOnElement()}async getNextVisibleItem(){const t=await this.getRoot();const e=await t.getAllVisibleItems();const i=Array.from(e).indexOf(this.element);const s=i+1;return e[s]||null}async getPreviousVisibleItem(){const t=await this.getRoot();const e=await t.getAllVisibleItems();const i=Array.from(e).indexOf(this.element);const s=i-1;return e[s]||null}async getLastVisibleSubItem(){await customElements.whenDefined("t-tree-item");const t=await this.getVisibleSubItems();if(t.length>0){return t[t.length-1]}else{return null}}async getVisibleSubItems(){await customElements.whenDefined("t-tree-item");if(this.expanded&&this.hasChildren){return Array.from(this.subItems).filter((async t=>await t.isVisible()))}else{return[]}}async getSubItems(){await customElements.whenDefined("t-tree-item");return this.subItems}async setFocusable(t){await customElements.whenDefined("t-link-or-button");return this.linkOrButton.focusable=t}async getRoot(){await customElements.whenDefined("t-tree");return this.element.closest("t-tree")}get linkOrButton(){return this.element.shadowRoot.querySelector("t-link-or-button")}get subItems(){return this.element.querySelectorAll("t-tree-item")}close(){this.expanded=false}open(){this.expanded=true}toggleExpanded(){this.expanded=!this.expanded}componentDidRender(){customElements.whenDefined("t-tree-item").then((()=>{this.hasChildren=this.element.querySelector("t-tree-item")!==null}))}async handleKeyDown(t){switch(t.key){case"ArrowRight":t.preventDefault();await this.handleArrowRight();break;case"ArrowLeft":t.preventDefault();await this.handleArrowLeft();break;case"ArrowUp":t.preventDefault();await this.handleArrowUp();break;case"ArrowDown":t.preventDefault();await this.handleArrowDown();break;case"Home":t.preventDefault();await this.handleHome();break;case"End":t.preventDefault();await this.handleEnd();break}}async handleArrowRight(){if(this.hasChildren){if(this.expanded){await this.moveFocusDown()}else{this.open()}}}async handleArrowLeft(){if(this.hasChildren&&this.expanded){this.close()}else{const t=await this.isTopLevel();if(!t)await this.moveFocusToParent()}}async handleArrowUp(){await this.moveFocusUp()}async handleArrowDown(){await this.moveFocusDown()}async handleHome(){await this.moveFocusToStart()}async handleEnd(){await this.moveFocusToEnd()}async moveFocusUp(){const t=await this.getPreviousVisibleItem();if(t){await this.setFocusable(false);await t.setFocusable(true);await t.focusOnLink()}}async moveFocusDown(){const t=await this.getNextVisibleItem();if(t){await this.setFocusable(false);await t.setFocusable(true);await t.focusOnLink()}}async moveFocusToParent(){const t=await this.isTopLevel();if(t)return;const e=this.element.parentElement;await this.setFocusable(false);await e.setFocusable(true);await e.focusOnLink()}async moveFocusToStart(){const t=await this.getRoot();const e=await t.getAllVisibleItems();const i=e[0];await this.setFocusable(false);await i.setFocusable(true);await i.focusOnLink()}async moveFocusToEnd(){const t=await this.getRoot();const e=await t.getAllVisibleItems();const i=e[e.length-1];await this.setFocusable(false);await i.setFocusable(true);await i.focusOnLink()}async handleClick(t){if(this.hasChildren){const t=await this.getRoot();await t.resetTabindex();await this.setFocusable(true)}this.labelClick.emit(t)}render(){return e("li",{key:"e918f0d13e404e94238bf2ccc23772e2d6bf4409","aria-expanded":this.expanded?"true":"false",class:this.expanded?"expanded":"collapsed",role:"treeitem",title:this.label},this.renderLink(),this.hasChildren&&e("div",{class:"collapsible"},e("ul",{role:"group"},e("slot",null))))}renderLink(){return e("t-link-or-button",{href:this.href,onElementClick:t=>this.handleClick(t.detail),onKeyDown:t=>this.handleKeyDown(t)},this.renderLabel())}renderLabel(){return e(a,null,this.hasChildren&&e(w,{fill:true,onClick:t=>this.handleArrowClick(t)}),e("span",{class:"label"},this.label))}handleArrowClick(t){t.preventDefault();t.stopPropagation();this.toggleExpanded()}get element(){return i(this)}};f.style=d;export{o as t_tree,f as t_tree_item};
//# sourceMappingURL=p-e17cf577.entry.js.map