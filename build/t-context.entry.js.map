{"file":"t-context.entry.esm.js","mappings":"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","names":["Chromator"],"sources":["src/components/t-context/t-context.css?tag=t-context","src/components/t-context/t-context.tsx"],"sourcesContent":[".root {\r\n  --t-base-border-colour: unset;\r\n  --t-base-colour-hue: unset;\r\n  --t-base-colour-lightness: unset;\r\n  --t-base-colour-saturation: unset;\r\n  --t-base-colour-chroma: unset;\r\n  --t-offset-base-colour-hue: calc(var(--t-base-colour-hue) + var(--t-base-colour-hue-offset, 0) * 1turn);\r\n  --t-base-colour: oklch(\r\n    var(--t-base-colour-lightness)\r\n    var(--t-base-colour-chroma)\r\n    var(--t-offset-base-colour-hue)\r\n  );\r\n  --t-background-background-colour: color-mix(in oklab, var(--t-page-background-colour) 90%, black);\r\n  --t-base-contrast-colour: unset;\r\n  --t-base-fill-colour: var(--t-base-border-colour);\r\n  --t-base-low-contrast-colour: unset;\r\n  --t-border-radius-default: 6px;\r\n  --t-clickable-area-size: 44px;\r\n  --t-default-font-size: 1rem;\r\n  --t-font-colour-default: var(--t-full-contrast-colour);\r\n  --t-input-field-background-colour: color-mix(in oklab, var(--t-full-contrast-colour) 5%, transparent);\r\n  --t-navbar-item-border-radius: 8px;\r\n  --t-page-background-colour: unset;\r\n  --t-page-max-width: 1200px;\r\n  --t-panel-background-colour: color-mix(in oklab, var(--t-base-colour) 12%, var(--t-small-contrast-colour));\r\n  --t-popover-alpha: 0.75;\r\n  --t-popover-backdrop-filter: blur(8px);\r\n  --t-popover-background-colour-base: color-mix(in oklab, var(--t-small-contrast-colour) calc(var(--t-popover-alpha) * 100%), transparent);\r\n  --t-popover-border-radius: var(--t-border-radius-default);\r\n  --t-popover-shadow: #000c 0 4px 12px;\r\n  --t-selection-background-colour: var(--t-base-fill-colour);\r\n  --t-selection-font-colour: var(--t-font-colour-default);\r\n  --t-small-contrast-colour: color-mix(in oklab, var(--t-page-background-colour) 95%, var(--t-full-contrast-colour));\r\n  --t-spacing-default: 1rem;\r\n  --t-spacing-in-group: 0.5rem;\r\n  --t-spacing-inline: 0.25rem;\r\n  --t-spacing-large: 2rem;\r\n  --t-transition-duration-long: 0.4s;\r\n  --t-transition-duration-medium: 0.2s;\r\n  --t-transition-duration-short: 0.1s;\r\n  --t-z-index-dropdown-menu: 200;\r\n  --t-z-index-tooltip: 100;\r\n\r\n  color: var(--t-font-colour-default);\r\n  font-family: Calibri, Arial, sans-serif;\r\n  font-size: var(--t-default-font-size);\r\n  min-height: 100vh;\r\n}\r\n\r\n@media (prefers-reduced-motion) {\r\n  .root {\r\n    --t-transition-duration-short: 0;\r\n  }\r\n}\r\n\r\n.root *::selection {\r\n  background-color: var(--t-selection-background-colour);\r\n  color: var(--t-selection-font-colour);\r\n}\r\n\r\n.root.light {\r\n  --t-selection-font-colour: white;\r\n  --t-full-contrast-colour: black;\r\n  --t-mode-colour-scaling: 1;\r\n}\r\n\r\n.root.dark {\r\n  --t-selection-font-colour: black;\r\n  --t-full-contrast-colour: white;\r\n  --t-mode-colour-scaling: -1;\r\n}\r\n","import { Component, h, Prop, Element, Method } from '@stencil/core';\r\n\r\nimport { Chromator, Oklch } from 'chromator';\r\nimport { asPercents } from '../../utils/utils';\r\nimport {\r\n  BASE_COLOUR_LUMINANCE_DARK_MODE,\r\n  BASE_COLOUR_LUMINANCE_LIGHT_MODE,\r\n  DARK_MODE_BACKGROUND_LUMINANCE,\r\n  HIGH_CONTRAST,\r\n  INPUT_FIELD_TO_PAGE_CONTRAST,\r\n  LIGHT_MODE_BACKGROUND_LUMINANCE,\r\n} from '../../constants';\r\nimport {\r\n  getDecreasedLuminanceByContrast,\r\n  getIncreasedLuminanceByContrast,\r\n} from '../../utils/colourUtils';\r\nimport state, {selectMode} from '../../store';\r\nimport { SelectedMode } from '../../types/Mode';\r\n\r\n@Component({\r\n  tag: 't-context',\r\n  styleUrl: 't-context.css',\r\n})\r\nexport class TContext {\r\n\r\n  @Prop() baseHue: number = 263;\r\n  @Prop() baseChroma: number = 0.4;\r\n  @Prop() contrast: number = 1;\r\n\r\n  @Method() async selectMode(mode: SelectedMode) {\r\n    selectMode(mode);\r\n  }\r\n\r\n  @Element() element: HTMLElement;\r\n\r\n  componentWillRender() {\r\n    state.baseHue = this.baseHue;\r\n    state.baseChroma = this.baseChroma;\r\n    state.contrast = this.contrast;\r\n  }\r\n\r\n  render() {\r\n    const modeClass = state.mode;\r\n    const baseColour = this.baseColour();\r\n    const { hue, chroma, l } = baseColour.getOklch();\r\n    this.setCssVariable('--t-base-colour-hue', hue.toFixed() + 'deg');\r\n    this.setCssVariable('--t-base-colour-chroma', chroma.toFixed(2));\r\n    this.setCssVariable('--t-page-background-colour', this.pageBackgroundColour().getHexCode());\r\n    this.setCssVariable('--t-base-colour', baseColour.getOklchCode());\r\n    this.setCssVariable('--t-base-colour-lightness', asPercents(l));\r\n    this.setCssVariable('--t-base-border-colour', this.baseBorderColour().getHexCode());\r\n    this.setCssVariable('--t-input-field-background-colour', this.inputFieldColour().getHexCode());\r\n    this.element.style.setProperty('filter', `contrast(${this.contrast})`);\r\n\r\n    return <div class={'root ' + modeClass}>\r\n      <slot/>\r\n    </div>;\r\n  }\r\n\r\n  private baseColour(): Chromator {\r\n    const hue = state.baseHue;\r\n    const chroma = state.baseChroma;\r\n    const oklch: Oklch = { hue, chroma, l: 0.5 };\r\n    return new Chromator(oklch).setRelativeLuminance(this.baseColourLuminance(), 'oklch');\r\n  }\r\n\r\n  private baseColourLuminance(): number {\r\n    return this.isDarkMode() ? BASE_COLOUR_LUMINANCE_DARK_MODE : BASE_COLOUR_LUMINANCE_LIGHT_MODE;\r\n  }\r\n\r\n  private isDarkMode(): boolean {\r\n    return state.mode === 'dark';\r\n  }\r\n\r\n  private pageBackgroundColour(): Chromator {\r\n    const backgroundColour = new Chromator('#fff');\r\n    backgroundColour.setRelativeLuminance(this.pageBackgroundLuminance(), 'oklch');\r\n    return backgroundColour;\r\n  }\r\n\r\n  private pageBackgroundLuminance(): number {\r\n    return this.isDarkMode() ? DARK_MODE_BACKGROUND_LUMINANCE : LIGHT_MODE_BACKGROUND_LUMINANCE;\r\n  }\r\n\r\n  private baseBorderColour(): Chromator {\r\n    return this.baseColour().copy().setRelativeLuminance(this.baseBorderColourLuminance(), 'oklch');\r\n  }\r\n\r\n  private baseBorderColourLuminance(): number {\r\n    return this.isDarkMode()\r\n      ? getIncreasedLuminanceByContrast(DARK_MODE_BACKGROUND_LUMINANCE, HIGH_CONTRAST)\r\n      : getDecreasedLuminanceByContrast(LIGHT_MODE_BACKGROUND_LUMINANCE, HIGH_CONTRAST);\r\n  }\r\n\r\n  private inputFieldColour(): Chromator {\r\n    const fieldColour = new Chromator('#fff');\r\n    fieldColour.setRelativeLuminance(this.inputFieldColourLuminance(), 'oklch');\r\n    return fieldColour;\r\n  }\r\n\r\n  private inputFieldColourLuminance(): number {\r\n    return this.isDarkMode()\r\n      ? getIncreasedLuminanceByContrast(DARK_MODE_BACKGROUND_LUMINANCE, INPUT_FIELD_TO_PAGE_CONTRAST)\r\n      : getDecreasedLuminanceByContrast(LIGHT_MODE_BACKGROUND_LUMINANCE, INPUT_FIELD_TO_PAGE_CONTRAST);\r\n  }\r\n\r\n  private setCssVariable(key: `--t-${string}`, value: string) {\r\n    this.element.style.setProperty(key, value);\r\n  }\r\n}\r\n"],"version":3}