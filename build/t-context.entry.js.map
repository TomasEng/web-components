{"file":"t-context.entry.esm.js","mappings":"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","names":["Chromator"],"sources":["src/components/t-context/t-context.css?tag=t-context","src/components/t-context/t-context.tsx"],"sourcesContent":[".root {\n  --t-base-border-colour: unset;\n  --t-base-colour-hue: unset;\n  --t-base-colour-lightness: unset;\n  --t-base-colour-saturation: unset;\n  --t-base-colour-chroma: unset;\n  --t-base-colour: oklch(\n    var(--t-base-colour-lightness)\n    var(--t-base-colour-chroma)\n    calc(var(--t-base-colour-hue) + var(--t-base-colour-hue-offset, 0) * 1turn)\n  );\n  --t-base-fill-colour: var(--t-base-border-colour);\n  --t-font-colour-default: var(--t-full-contrast-colour);\n  --t-input-field-background-colour: unset;\n  --t-page-background-colour: unset;\n  --t-selection-background-colour: var(--t-base-fill-colour);\n  --t-selection-font-colour: var(--t-font-colour-default);\n  --t-transition-duration-long: calc(--t-transition-duration-medium * 2);\n  --t-transition-duration-medium: calc(--t-transition-duration-short * 2);\n  --t-transition-duration-short: 0.1s;\n  --t-background-background-colour: lch(from var(--t-page-background-colour) calc(l * 0.9) h c);\n}\n\n@media (prefers-reduced-motion) {\n  .root {\n    --t-transition-duration-short: 0;\n  }\n}\n\n.root *::selection {\n  background-color: var(--t-selection-background-colour);\n  color: var(--t-selection-font-colour);\n}\n\n.root.light {\n  --t-selection-font-colour: white;\n  --t-full-contrast-colour: black;\n}\n\n.root.dark {\n  --t-selection-font-colour: black;\n  --t-full-contrast-colour: white;\n}\n","import { Component, h, Prop, Element } from '@stencil/core';\n\nimport { Chromator, Hsl, Oklch } from 'chromator';\nimport { asPercents } from '../../utils/utils';\nimport {\n  BASE_COLOUR_LUMINANCE_DARK_MODE,\n  BASE_COLOUR_LUMINANCE_LIGHT_MODE,\n  DARK_MODE_BACKGROUND_LUMINANCE,\n  DEFAULT_BORDER_TO_BACKGROUND_CONTRAST,\n  INPUT_FIELD_TO_PAGE_CONTRAST,\n  LIGHT_MODE_BACKGROUND_LUMINANCE,\n} from '../../constants';\nimport {\n  getDecreasedLuminanceByContrast,\n  getIncreasedLuminanceByContrast,\n} from '../../utils/colourUtils';\nimport state from '../../store';\n\n@Component({\n  tag: 't-context',\n  styleUrl: 't-context.css',\n})\nexport class TContext {\n\n  @Prop() darkMode: boolean = false;\n  @Prop() baseHue: number = 160;\n  @Prop() baseChroma: number = 0.3;\n\n  @Element() element: HTMLElement;\n\n  render() {\n    state.darkMode = this.darkMode;\n    state.baseHue = this.baseHue;\n    state.baseChroma = this.baseChroma;\n    const modeClass = this.darkMode ? 'dark' : 'light';\n    const baseColour = this.baseColour();\n    const { hue, chroma, l } = baseColour.getOklch();\n    this.setCssVariable('--t-base-colour-hue', hue.toFixed() + 'deg');\n    this.setCssVariable('--t-base-colour-chroma', chroma.toFixed(2));\n    this.setCssVariable('--t-page-background-colour', this.pageBackgroundColour().getHexCode());\n    this.setCssVariable('--t-base-colour', baseColour.getOklchCode());\n    this.setCssVariable('--t-base-colour-lightness', asPercents(l));\n    this.setCssVariable('--t-base-border-colour', this.baseBorderColour().getHexCode());\n    this.setCssVariable('--t-input-field-background-colour', this.inputFieldColour().getHexCode());\n\n    return <div class={'root ' + modeClass}>\n      <slot/>\n    </div>;\n  }\n\n  private baseColour(): Chromator {\n    const hue = this.baseHue;\n    const chroma = this.baseChroma;\n    const oklch: Oklch = { hue, chroma, l: 0.5 };\n    return new Chromator(oklch).setRelativeLuminance(this.baseColourLuminance(), 'oklch');\n  }\n\n  private baseColourLuminance(): number {\n    return this.darkMode ? BASE_COLOUR_LUMINANCE_DARK_MODE : BASE_COLOUR_LUMINANCE_LIGHT_MODE;\n  }\n\n  private pageBackgroundColour(): Chromator {\n    const backgroundColour = new Chromator('#fff');\n    backgroundColour.setRelativeLuminance(this.pageBackgroundLuminance(), 'oklch');\n    return backgroundColour;\n  }\n\n  private pageBackgroundLuminance(): number {\n    return this.darkMode ? DARK_MODE_BACKGROUND_LUMINANCE : LIGHT_MODE_BACKGROUND_LUMINANCE;\n  }\n\n  private baseBorderColour(): Chromator {\n    return this.baseColour().copy().setRelativeLuminance(this.baseBorderColourLuminance(), 'oklch');\n  }\n\n  private baseBorderColourLuminance(): number {\n    return this.darkMode\n      ? getIncreasedLuminanceByContrast(DARK_MODE_BACKGROUND_LUMINANCE, DEFAULT_BORDER_TO_BACKGROUND_CONTRAST)\n      : getDecreasedLuminanceByContrast(LIGHT_MODE_BACKGROUND_LUMINANCE, DEFAULT_BORDER_TO_BACKGROUND_CONTRAST);\n  }\n\n  private inputFieldColour(): Chromator {\n    const fieldColour = new Chromator('#fff');\n    fieldColour.setRelativeLuminance(this.inputFieldColourLuminance(), 'oklch');\n    return fieldColour;\n  }\n\n  private inputFieldColourLuminance(): number {\n    return this.darkMode\n      ? getIncreasedLuminanceByContrast(DARK_MODE_BACKGROUND_LUMINANCE, INPUT_FIELD_TO_PAGE_CONTRAST)\n      : getDecreasedLuminanceByContrast(LIGHT_MODE_BACKGROUND_LUMINANCE, INPUT_FIELD_TO_PAGE_CONTRAST);\n  }\n\n  private setCssVariable(key: `--t-${string}`, value: string) {\n    this.element.style.setProperty(key, value);\n  }\n}\n"],"version":3}