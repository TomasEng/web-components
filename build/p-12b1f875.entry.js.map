{"version":3,"names":["tArticleText","sourcesHeading","published","date","toLocaleDateString","year","month","day","tArticleCss","TArticleStyle0","TArticle","constructor","hostRef","this","sources","text","defaultText","getSourceOrder","customElements","whenDefined","sourceRefElements","element","querySelectorAll","sourceIds","Promise","all","Array","from","map","sourceRefElement","getSourceId","uniqueItems","getSourceList","shadowRoot","querySelector","render","h","key","level","heading","publisheddate","slot","innerHTML","Date","parse","Object","keys","length","componentDidRender","then","sourceOrder","orderedSources","orderObject","sourceList"],"sources":["src/components/t-article/t-article.text.ts","src/components/t-article/t-article.css?tag=t-article&encapsulation=scoped","src/components/t-article/t-article.tsx"],"sourcesContent":["export type TArticleText = {\n  sourcesHeading: string;\n  published: (date: Date) => string;\n}\n\nconst tArticleText: TArticleText = {\n  sourcesHeading: 'Kilder',\n  published:\n    (date: Date) =>\n      `Publisert <time>${date.toLocaleDateString('nb-NO', { year: 'numeric', month: 'long', day: 'numeric' })}</time>`,\n};\n\nexport default tArticleText;\n","::slotted(p), ::slotted(ul), ::slotted(ol) {\n  line-height: var(--t-line-height-paragraph);\n}\n","import { Component, Element, h, Method, Prop } from '@stencil/core';\nimport { TSourceItemList } from '../../types/TSourceItemList';\nimport { orderObject } from '../../utils/objectUtils';\nimport { uniqueItems } from '../../utils/arrayUtils';\nimport defaultText, { TArticleText } from './t-article.text';\n\n@Component({\n  tag: 't-article',\n  styleUrl: 't-article.css',\n  scoped: true,\n})\nexport class TArticle {\n\n  @Prop() sources: TSourceItemList = {};\n  @Prop() heading: string;\n  @Prop() text: TArticleText = defaultText;\n  @Prop() publisheddate?: string;\n\n  @Element() element: HTMLElement;\n\n  @Method() async getSourceOrder(): Promise<string[]> {\n    await customElements.whenDefined('t-source-ref');\n    const sourceRefElements: NodeListOf<HTMLTSourceRefElement> = this.element.querySelectorAll('t-source-ref');\n    const sourceIds = await Promise.all(Array.from(sourceRefElements).map(sourceRefElement => {\n      return sourceRefElement.getSourceId();\n    }));\n    return uniqueItems(sourceIds);\n  }\n\n  @Method() async getSourceList(): Promise<HTMLTSourceListElement> {\n    await customElements.whenDefined('t-source-list');\n    return this.element.shadowRoot.querySelector('t-source-list');\n  }\n\n  render() {\n    return (\n      <article>\n        <t-heading level={1}>\n          {this.heading}\n          {this.publisheddate && <p\n            slot='note'\n            innerHTML={this.text.published(new Date(Date.parse(this.publisheddate)))}\n          />}\n        </t-heading>\n        <slot></slot>\n        {this.sources && !!Object.keys(this.sources).length && (\n          <footer>\n            <t-heading level={2}>{this.text.sourcesHeading}</t-heading>\n            <t-source-list sources={{}} />\n          </footer>\n        )}\n      </article>\n    );\n  }\n\n  componentDidRender() {\n    this.getSourceOrder().then(sourceOrder => {\n      const orderedSources = orderObject(this.sources, sourceOrder);\n      const sourceList = this.element.querySelector('t-source-list');\n      if (sourceOrder.length && sourceList) {\n        sourceList.sources = orderedSources;\n      }\n    });\n  }\n}\n"],"mappings":"0HAKA,MAAMA,EAA6B,CACjCC,eAAgB,SAChBC,UACGC,GACC,mBAAmBA,EAAKC,mBAAmB,QAAS,CAAEC,KAAM,UAAWC,MAAO,OAAQC,IAAK,sBCTjG,MAAMC,EAAc,sGACpB,MAAAC,EAAeD,E,MCUFE,EAAQ,MALrB,WAAAC,CAAAC,G,UAOUC,KAAAC,QAA2B,GAE3BD,KAAAE,KAAqBC,C,CAKnB,oBAAMC,SACRC,eAAeC,YAAY,gBACjC,MAAMC,EAAuDP,KAAKQ,QAAQC,iBAAiB,gBAC3F,MAAMC,QAAkBC,QAAQC,IAAIC,MAAMC,KAAKP,GAAmBQ,KAAIC,GAC7DA,EAAiBC,iBAE1B,OAAOC,EAAYR,E,CAGX,mBAAMS,SACRd,eAAeC,YAAY,iBACjC,OAAON,KAAKQ,QAAQY,WAAWC,cAAc,gB,CAG/C,MAAAC,GACE,OACEC,EAAA,WAAAC,IAAA,4CACED,EAAA,aAAAC,IAAA,2CAAWC,MAAO,GACfzB,KAAK0B,QACL1B,KAAK2B,eAAiBJ,EAAA,KAAAC,IAAA,2CACrBI,KAAK,OACLC,UAAW7B,KAAKE,KAAKb,UAAU,IAAIyC,KAAKA,KAAKC,MAAM/B,KAAK2B,oBAG5DJ,EAAA,QAAAC,IAAA,6CACCxB,KAAKC,WAAa+B,OAAOC,KAAKjC,KAAKC,SAASiC,QAC3CX,EAAA,UAAAC,IAAA,4CACED,EAAA,aAAAC,IAAA,2CAAWC,MAAO,GAAIzB,KAAKE,KAAKd,gBAChCmC,EAAA,iBAAAC,IAAA,2CAAevB,QAAS,M,CAOlC,kBAAAkC,GACEnC,KAAKI,iBAAiBgC,MAAKC,IACzB,MAAMC,EAAiBC,EAAYvC,KAAKC,QAASoC,GACjD,MAAMG,EAAaxC,KAAKQ,QAAQa,cAAc,iBAC9C,GAAIgB,EAAYH,QAAUM,EAAY,CACpCA,EAAWvC,QAAUqC,C","ignoreList":[]}