{"version":3,"names":["dFilled","dUnfilled","CaretRightIcon","_a","fill","rest","__rest","h","SvgTemplate","Object","assign","d","tTreeItemCss","TTreeItemStyle0","TTreeItem","isExpanded","customElements","whenDefined","this","expanded","isVisible","isTopLevel","parent","element","parentElement","isParentVisible","isFocusable","linkElement","focusable","tagName","focusOnLink","Promise","all","getAnchorElement","then","anchor","focus","getNextVisibleItem","root","getRoot","allVisibleItems","getAllVisibleItems","index","Array","from","indexOf","nextIndex","getPreviousVisibleItem","previousIndex","getLastVisibleSubItem","visibleSubItems","getVisibleSubItems","length","hasChildren","subItems","filter","async","subItem","getSubItems","setFocusable","closest","shadowRoot","querySelector","querySelectorAll","close","open","toggleExpanded","componentDidRender","handleKeyDown","event","key","preventDefault","handleArrowRight","handleArrowLeft","handleArrowUp","handleArrowDown","handleHome","handleEnd","moveFocusDown","moveFocusToParent","moveFocusUp","moveFocusToStart","moveFocusToEnd","previousItem","nextItem","firstItem","lastItem","handleClick","resetTabindex","render","class","role","title","label","href","onClick","onKeyDown","e"],"sources":["src/icons/CaretRightIcon.tsx","src/components/t-tree-item/t-tree-item.css?tag=t-tree-item&encapsulation=shadow","src/components/t-tree-item/t-tree-item.tsx"],"sourcesContent":["import { h } from '@stencil/core';\nimport { IconProps } from './IconProps';\nimport { SvgTemplate } from './SvgTemplate';\n\nconst dFilled = 'M9.713 18.193a.75.75 0 0 1-.463-.693v-11a.75.75 0 0 1 1.28-.53l5.5 5.5a.75.75 0 0 1 0 1.06l-5.5 5.5a.75.75 0 0 1-.817.163Z';\nconst dUnfilled = 'M9.713 18.193a.75.75 0 0 1-.463-.693v-11a.75.75 0 0 1 1.28-.53l5.5 5.5a.75.75 0 0 1 0 1.06l-5.5 5.5a.75.75 0 0 1-.817.163Zm1.037-2.504L14.44 12l-3.69-3.69v7.38Z';\n\nexport const CaretRightIcon = ({fill, ...rest}: IconProps) => (\n  <SvgTemplate {...rest}>\n    <path\n      fill-rule=\"evenodd\"\n      clip-rule=\"evenodd\"\n      d={fill ? dFilled : dUnfilled}\n      fill=\"currentColor\"\n    />\n  </SvgTemplate>\n);\n","t-link::part(link) {\n  display: flex;\n  align-items: center;\n  gap: var(--t-spacing-inline);\n}\n\nli {\n  &.expanded {\n    svg {\n      rotate: 90deg;\n    }\n\n    .collapsible {\n      grid-template-rows: 1fr;\n    }\n  }\n\n  &.collapsed {\n    svg {\n      rotate: 0deg;\n    }\n\n    .collapsible {\n      grid-template-rows: 0fr;\n\n      ul {\n        visibility: hidden;\n      }\n    }\n  }\n\n  .collapsible {\n    overflow: hidden;\n    display: grid;\n    grid-template-rows: 1fr; /* To make height transition work */\n    transition: grid-template-rows var(--t-transition-duration-medium);\n\n    ul {\n      min-height: 0;\n      transition: visibility 1s;\n    }\n  }\n\n  svg {\n    transition: rotate var(--t-transition-duration-medium);\n  }\n}\n\nul {\n  list-style-type: none;\n  padding-left: var(--t-spacing-large);\n  margin: 0;\n}\n","import { Component, Element, h, Method, Prop, State } from '@stencil/core';\nimport { CaretRightIcon } from '../../icons/CaretRightIcon';\n\n@Component({\n  tag: 't-tree-item',\n  styleUrl: 't-tree-item.css',\n  shadow: true,\n})\nexport class TTreeItem {\n\n  @Element() element: HTMLTTreeItemElement;\n\n  @Prop() label: string;\n  @Prop() href: string | null = null;\n\n  @State() expanded = true;\n  @State() hasChildren: boolean = false;\n\n  @Method() async isExpanded(): Promise<boolean> {\n    await customElements.whenDefined('t-tree-item');\n    return this.expanded;\n  }\n\n  @Method() async isVisible(): Promise<boolean> {\n    const isTopLevel = await this.isTopLevel();\n    if (isTopLevel) {\n      return true;\n    } else {\n      const parent = this.element.parentElement as HTMLTTreeItemElement;\n      const isParentVisible = await parent.isVisible();\n      if (!isParentVisible) return false;\n      return await parent.isExpanded();\n    }\n  }\n\n  @Method() async isFocusable(): Promise<boolean> {\n    await customElements.whenDefined('t-link');\n    return this.linkElement.focusable;\n  }\n\n  @Method() async isTopLevel(): Promise<boolean> {\n    await customElements.whenDefined('t-tree-item');\n    return this.element.parentElement.tagName === 'T-TREE';\n  }\n\n  @Method() async focusOnLink() {\n    await Promise.all([\n      customElements.whenDefined('t-link'),\n      customElements.whenDefined('t-tree-item'),\n    ]);\n    await this.linkElement.getAnchorElement().then((anchor) => anchor.focus());\n  }\n\n  @Method() async getNextVisibleItem(): Promise<HTMLTTreeItemElement | null> {\n    const root = await this.getRoot();\n    const allVisibleItems = await root.getAllVisibleItems();\n    const index = Array.from(allVisibleItems).indexOf(this.element);\n    const nextIndex = index + 1;\n    return allVisibleItems[nextIndex] || null;\n  }\n\n  @Method() async getPreviousVisibleItem(): Promise<HTMLTTreeItemElement | null> {\n    const root = await this.getRoot();\n    const allVisibleItems = await root.getAllVisibleItems();\n    const index = Array.from(allVisibleItems).indexOf(this.element);\n    const previousIndex = index - 1;\n    return allVisibleItems[previousIndex] || null;\n  }\n\n  @Method() async getLastVisibleSubItem(): Promise<HTMLTTreeItemElement | null> {\n    await customElements.whenDefined('t-tree-item');\n    const visibleSubItems = await this.getVisibleSubItems();\n    if (visibleSubItems.length > 0) {\n      return visibleSubItems[visibleSubItems.length - 1];\n    } else {\n      return null;\n    }\n  }\n\n  @Method() async getVisibleSubItems(): Promise<HTMLTTreeItemElement[]> {\n    await customElements.whenDefined('t-tree-item');\n    if (this.expanded && this.hasChildren) {\n      return Array\n        .from(this.subItems)\n        .filter(async (subItem) => await subItem.isVisible());\n    } else {\n      return [];\n    }\n  }\n\n  @Method() async getSubItems() {\n    await customElements.whenDefined('t-tree-item');\n    return this.subItems;\n  }\n\n  @Method() async setFocusable(focusable: boolean) {\n    await customElements.whenDefined('t-link');\n    return this.linkElement.focusable = focusable;\n  }\n\n  @Method() async getRoot(): Promise<HTMLTTreeElement> {\n    await customElements.whenDefined('t-tree');\n    return this.element.closest('t-tree');\n  }\n\n  get linkElement(): HTMLTLinkElement {\n    return this.element.shadowRoot.querySelector('t-link');\n  }\n\n  get subItems(): NodeListOf<HTMLTTreeItemElement> {\n    return this.element.querySelectorAll('t-tree-item');\n  }\n\n  private close() {\n    this.expanded = false;\n  }\n\n  private open() {\n    this.expanded = true;\n  }\n\n  private toggleExpanded() {\n    this.expanded = !this.expanded;\n  }\n\n  componentDidRender() {\n    customElements.whenDefined('t-tree-item').then(() => {\n      this.hasChildren = this.element.querySelector('t-tree-item') !== null;\n    });\n  }\n\n  private async handleKeyDown(event: KeyboardEvent) {\n    switch (event.key) {\n      case 'ArrowRight':\n        event.preventDefault();\n        await this.handleArrowRight();\n        break;\n      case 'ArrowLeft':\n        event.preventDefault();\n        await this.handleArrowLeft();\n        break;\n      case 'ArrowUp':\n        event.preventDefault();\n        await this.handleArrowUp();\n        break;\n      case 'ArrowDown':\n        event.preventDefault();\n        await this.handleArrowDown();\n        break;\n      case 'Home':\n        event.preventDefault();\n        await this.handleHome();\n        break;\n      case 'End':\n        event.preventDefault();\n        await this.handleEnd();\n        break;\n    }\n  }\n\n  private async handleArrowRight() {\n    if (this.hasChildren) {\n      if (this.expanded) {\n        await this.moveFocusDown();\n      } else {\n        this.open();\n      }\n    }\n  }\n\n  private async handleArrowLeft() {\n    if (this.hasChildren && this.expanded) {\n      this.close();\n    } else {\n      const isTopLevel = await this.isTopLevel();\n      if (!isTopLevel) await this.moveFocusToParent();\n    }\n  }\n\n  private async handleArrowUp() {\n    await this.moveFocusUp();\n  }\n\n  private async handleArrowDown() {\n    await this.moveFocusDown();\n  }\n\n  private async handleHome() {\n    await this.moveFocusToStart();\n  }\n\n  private async handleEnd() {\n    await this.moveFocusToEnd();\n  }\n\n  private async moveFocusUp() {\n    const previousItem = await this.getPreviousVisibleItem();\n    if (previousItem) {\n      await this.setFocusable(false);\n      await previousItem.setFocusable(true);\n      await previousItem.focusOnLink();\n    }\n  }\n\n  private async moveFocusDown() {\n    const nextItem = await this.getNextVisibleItem();\n    if (nextItem) {\n      await this.setFocusable(false);\n      await nextItem.setFocusable(true);\n      await nextItem.focusOnLink();\n    }\n  }\n\n  private async moveFocusToParent() {\n    const isTopLevel = await this.isTopLevel();\n    if (isTopLevel) return;\n    const parent = this.element.parentElement as HTMLTTreeItemElement;\n    await this.setFocusable(false);\n    await parent.setFocusable(true);\n    await parent.focusOnLink();\n  }\n\n  private async moveFocusToStart() {\n    const root = await this.getRoot();\n    const allVisibleItems = await root.getAllVisibleItems();\n    const firstItem = allVisibleItems[0];\n    await this.setFocusable(false);\n    await firstItem.setFocusable(true);\n    await firstItem.focusOnLink();\n  }\n\n  private async moveFocusToEnd() {\n    const root = await this.getRoot();\n    const allVisibleItems = await root.getAllVisibleItems();\n    const lastItem = allVisibleItems[allVisibleItems.length - 1];\n    await this.setFocusable(false);\n    await lastItem.setFocusable(true);\n    await lastItem.focusOnLink();\n  }\n\n  private async handleClick() {\n    if (this.hasChildren) {\n      const root = await this.getRoot();\n      await root.resetTabindex();\n      await this.setFocusable(true);\n    }\n  }\n\n  render() {\n    return (\n      <li\n        aria-expanded={this.expanded ? 'true' : 'false'}\n        class={this.expanded ? 'expanded' : 'collapsed'}\n        role='treeitem'\n        title={this.label}\n      >\n        <t-link\n          href={this.href}\n          onClick={() => this.handleClick()}\n          onKeyDown={(e) => this.handleKeyDown(e)}\n        >\n          {this.hasChildren && (\n            <CaretRightIcon\n              fill\n              onClick={() => this.toggleExpanded()}\n            />\n          )}\n          <span class='label'>{this.label}</span>\n        </t-link>\n        {this.hasChildren && (\n          <div class='collapsible'>\n            <ul role='group'>\n              <slot></slot>\n            </ul>\n          </div>\n        )}\n      </li>\n    );\n  }\n}\n"],"mappings":"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"}