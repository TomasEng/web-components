import{h as t,r as e,g as i}from"./p-223dec8c.js";import{S as a}from"./p-ab9dbb64.js";var s=undefined&&undefined.__rest||function(t,e){var i={};for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)&&e.indexOf(a)<0)i[a]=t[a];if(t!=null&&typeof Object.getOwnPropertySymbols==="function")for(var s=0,a=Object.getOwnPropertySymbols(t);s<a.length;s++){if(e.indexOf(a[s])<0&&Object.prototype.propertyIsEnumerable.call(t,a[s]))i[a[s]]=t[a[s]]}return i};const n="M9.713 18.193a.75.75 0 0 1-.463-.693v-11a.75.75 0 0 1 1.28-.53l5.5 5.5a.75.75 0 0 1 0 1.06l-5.5 5.5a.75.75 0 0 1-.817.163Z";const r="M9.713 18.193a.75.75 0 0 1-.463-.693v-11a.75.75 0 0 1 1.28-.53l5.5 5.5a.75.75 0 0 1 0 1.06l-5.5 5.5a.75.75 0 0 1-.817.163Zm1.037-2.504L14.44 12l-3.69-3.69v7.38Z";const l=e=>{var{fill:i}=e,l=s(e,["fill"]);return t(a,Object.assign({},l),t("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:i?n:r,fill:"currentColor"}))};const o="t-link::part(link) {\n  display: flex;\n  align-items: center;\n  gap: var(--t-spacing-inline);\n}\n\nli {\n  &.expanded {\n    svg {\n      rotate: 90deg;\n    }\n\n    .collapsible {\n      grid-template-rows: 1fr;\n    }\n  }\n\n  &.collapsed {\n    svg {\n      rotate: 0deg;\n    }\n\n    .collapsible {\n      grid-template-rows: 0fr;\n\n      ul {\n        visibility: hidden;\n      }\n    }\n  }\n\n  .collapsible {\n    overflow: hidden;\n    display: grid;\n    grid-template-rows: 1fr; /* To make height transition work */\n    transition: grid-template-rows var(--t-transition-duration-medium);\n\n    ul {\n      min-height: 0;\n      transition: visibility 1s;\n    }\n  }\n\n  svg {\n    transition: rotate var(--t-transition-duration-medium);\n  }\n}\n\nul {\n  list-style-type: none;\n  padding-left: var(--t-spacing-large);\n  margin: 0;\n}\n";const c=o;const h=class{constructor(t){e(this,t);this.label=undefined;this.href=null;this.expanded=true;this.hasChildren=false}async isExpanded(){await customElements.whenDefined("t-tree-item");return this.expanded}async isVisible(){const t=await this.isTopLevel();if(t){return true}else{const t=this.element.parentElement;const e=await t.isVisible();if(!e)return false;return await t.isExpanded()}}async isFocusable(){await customElements.whenDefined("t-link");return this.linkElement.focusable}async isTopLevel(){await customElements.whenDefined("t-tree-item");return this.element.parentElement.tagName==="T-TREE"}async focusOnLink(){await Promise.all([customElements.whenDefined("t-link"),customElements.whenDefined("t-tree-item")]);await this.linkElement.getAnchorElement().then((t=>t.focus()))}async getNextVisibleItem(){const t=await this.getRoot();const e=await t.getAllVisibleItems();const i=Array.from(e).indexOf(this.element);const a=i+1;return e[a]||null}async getPreviousVisibleItem(){const t=await this.getRoot();const e=await t.getAllVisibleItems();const i=Array.from(e).indexOf(this.element);const a=i-1;return e[a]||null}async getLastVisibleSubItem(){await customElements.whenDefined("t-tree-item");const t=await this.getVisibleSubItems();if(t.length>0){return t[t.length-1]}else{return null}}async getVisibleSubItems(){await customElements.whenDefined("t-tree-item");if(this.expanded&&this.hasChildren){return Array.from(this.subItems).filter((async t=>await t.isVisible()))}else{return[]}}async getSubItems(){await customElements.whenDefined("t-tree-item");return this.subItems}async setFocusable(t){await customElements.whenDefined("t-link");return this.linkElement.focusable=t}async getRoot(){await customElements.whenDefined("t-tree");return this.element.closest("t-tree")}get linkElement(){return this.element.shadowRoot.querySelector("t-link")}get subItems(){return this.element.querySelectorAll("t-tree-item")}close(){this.expanded=false}open(){this.expanded=true}toggleExpanded(){this.expanded=!this.expanded}componentDidRender(){customElements.whenDefined("t-tree-item").then((()=>{this.hasChildren=this.element.querySelector("t-tree-item")!==null}))}async handleKeyDown(t){switch(t.key){case"ArrowRight":t.preventDefault();await this.handleArrowRight();break;case"ArrowLeft":t.preventDefault();await this.handleArrowLeft();break;case"ArrowUp":t.preventDefault();await this.handleArrowUp();break;case"ArrowDown":t.preventDefault();await this.handleArrowDown();break;case"Home":t.preventDefault();await this.handleHome();break;case"End":t.preventDefault();await this.handleEnd();break}}async handleArrowRight(){if(this.hasChildren){if(this.expanded){await this.moveFocusDown()}else{this.open()}}}async handleArrowLeft(){if(this.hasChildren&&this.expanded){this.close()}else{const t=await this.isTopLevel();if(!t)await this.moveFocusToParent()}}async handleArrowUp(){await this.moveFocusUp()}async handleArrowDown(){await this.moveFocusDown()}async handleHome(){await this.moveFocusToStart()}async handleEnd(){await this.moveFocusToEnd()}async moveFocusUp(){const t=await this.getPreviousVisibleItem();if(t){await this.setFocusable(false);await t.setFocusable(true);await t.focusOnLink()}}async moveFocusDown(){const t=await this.getNextVisibleItem();if(t){await this.setFocusable(false);await t.setFocusable(true);await t.focusOnLink()}}async moveFocusToParent(){const t=await this.isTopLevel();if(t)return;const e=this.element.parentElement;await this.setFocusable(false);await e.setFocusable(true);await e.focusOnLink()}async moveFocusToStart(){const t=await this.getRoot();const e=await t.getAllVisibleItems();const i=e[0];await this.setFocusable(false);await i.setFocusable(true);await i.focusOnLink()}async moveFocusToEnd(){const t=await this.getRoot();const e=await t.getAllVisibleItems();const i=e[e.length-1];await this.setFocusable(false);await i.setFocusable(true);await i.focusOnLink()}async handleClick(){if(this.hasChildren){const t=await this.getRoot();await t.resetTabindex();await this.setFocusable(true)}}render(){return t("li",{key:"eb096de48346626a4e0e0f1f2b20fca9ab9dc49b","aria-expanded":this.expanded?"true":"false",class:this.expanded?"expanded":"collapsed",role:"treeitem",title:this.label},t("t-link",{key:"77dd422b909bfd80100f9d19d4b4c1c14dd4a36a",href:this.href,onClick:()=>this.handleClick(),onKeyDown:t=>this.handleKeyDown(t)},this.hasChildren&&t(l,{fill:true,onClick:()=>this.toggleExpanded()}),t("span",{key:"12a40320732938843e81d1fe51c92c40a90ea9d3",class:"label"},this.label)),this.hasChildren&&t("div",{class:"collapsible"},t("ul",{role:"group"},t("slot",null))))}get element(){return i(this)}};h.style=c;export{h as t_tree_item};
//# sourceMappingURL=p-c78bce23.entry.js.map